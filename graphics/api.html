<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
</head>
<body>

  <pre id="loading">Loading script ...</pre>

  <script>
    console.log("hello world!");

    // set p1
    // set p2
    // finalize
    // backtrack?
    const commands = ['set_round_win', 'setp1', 'setp2', 'finalize'];
    const searchParams = new URLSearchParams(window.location.search.slice(1));
    for (const pair of searchParams.entries()) {
      const key = pair[0];
      const value = pair[1];
      console.log("got key/value:", key, value);
      if (commands.includes(key)) {
        console.log("will send command!", key);
        nodecg.sendMessage(key, value);
      } else {
        console.log("unknown command:", key);
      }
    }

    document.getElementById('loading').innerHTML = "Script loaded OK!";
  </script>
</body>
</html>
